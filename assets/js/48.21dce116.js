(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{512:function(a,t,s){a.exports=s.p+"assets/img/image-20200726171623552.b2b8ada4.png"},513:function(a,t,s){a.exports=s.p+"assets/img/image-20200726172441438.8eafd09e.png"},514:function(a,t,s){a.exports=s.p+"assets/img/image-20200726172743594.831835da.png"},515:function(a,t,s){a.exports=s.p+"assets/img/image-20200726172910397.6a8bd803.png"},961:function(a,t,s){"use strict";s.r(t);var e=s(42),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"laravel-docker-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-docker-setup"}},[a._v("#")]),a._v(" Laravel Docker Setup")]),a._v(" "),e("p",[a._v("這次學習在Docker建立Laravel的開發環境，方便日後上生產環境(Production)")]),a._v(" "),e("blockquote",[e("p",[a._v("參考: "),e("a",{attrs:{href:"https://blog.wu-boy.com/2019/12/setup-laravel-environment-in-15-minutes/",target:"_blank",rel:"noopener noreferrer"}},[a._v("用 15 分鐘快速打造 Laravel 開發環境"),e("OutboundLink")],1),a._v(" , "),e("a",{attrs:{href:"https://laradock.io/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laradock"),e("OutboundLink")],1)])]),a._v(" "),e("p",[a._v("假設本身沒有Laravel Project，從第一步開始")]),a._v(" "),e("p",[a._v("目標目錄架構, 這樣做方便日後多個項目, Multiple Projects")]),a._v(" "),e("blockquote",[e("p",[a._v("https://laradock.io/getting-started/")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("├── laradock\n└── project1\n└── project2\n└── "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),e("p",[a._v("首先clone一份laradock.git")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/Laradock/laradock.git\n\nCloning into "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laradock'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nremote: Enumerating objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(", done.\nremote: Counting objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Compressing objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Total "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", reused "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", pack-reused "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10329")]),a._v("\nReceiving objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v("/10339"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("9.23")]),a._v(" MiB "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.35")]),a._v(" MiB/s, done.\nResolving deltas: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5605")]),a._v("/5605"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\n")])])]),e("p",[a._v("進入laradock folder, 復制env-example 進行自定義")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" laradock\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" env-example .env\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\t\n")])])]),a._v(" "),e("p",[a._v("另外為了避免"),e("code",[a._v("80")]),a._v(" "),e("code",[a._v("443")]),a._v(" port 已被使用，所以更改到"),e("code",[a._v("8000")]),a._v(" "),e("code",[a._v("4430")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTP_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTPS_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("4430")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# qnap nas 本身已佔用8080，這時可以改成WORKSPACE_VUE_CLI_SERVE_HOST_PORT")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("WORKSPACE_VUE_CLI_SERVE_HOST_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("9090")]),a._v("\n")])])]),e("p",[a._v("進入容器 "),e("code",[a._v("nginx")]),a._v(" 和 "),e("code",[a._v("mysql")]),a._v(", 會自動生成"),e("code",[a._v("network")]),a._v(", "),e("code",[a._v("container")]),a._v("等項目")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose up -d nginx mysql\n\nCreating network "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_frontend"')]),a._v(" with driver "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_backend"')]),a._v(" with driver "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_default"')]),a._v(" with the default driver\nCreating laradock_docker-in-docker_1 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_mysql_1            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_workspace_1        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_php-fpm_1          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_nginx_1            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n")])])]),e("p",[a._v("然後進入剛剛生成的"),e("code",[a._v("laradock_workspace_1")]),a._v(", 日後的所有"),e("code",[a._v("php")]),a._v("的操作都是在這裡進行.\n根據"),e("code",[a._v(".env")]),a._v(" 中"),e("code",[a._v("APP_CODE_PATH_CONTAINER")]),a._v("，所以一開始的路徑在"),e("code",[a._v("/var/www")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@93e56517c403:/var/www"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),e("p",[a._v("在建立文件夾"),e("code",[a._v("project1")]),a._v(", 並生成Laravel項目")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" project1\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" project1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("composer")]),a._v(" create-project laravel/laravel --prefer-dist "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n\nInstalling laravel/laravel "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing laravel/laravel "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nCreated project "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" @php -r "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"file_exists('.env') || copy('.env.example', '.env');\"")]),a._v("\nLoading "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("composer")]),a._v(" repositories with package information\nUpdating dependencies "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("including require-dev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nPackage operations: "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("93")]),a._v(" installs, "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" updates, "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" removals\n  - Installing voku/portable-ascii "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.4")]),a._v(".10"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing symfony/polyfill-ctype "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v1.14.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing phpoption/phpoption "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.7")]),a._v(".2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing vlucas/phpdotenv "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v4.1.2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),e("p",[a._v("如果這時看本地文件的話，會看到多了一個"),e("code",[a._v("project1")]),a._v("的文件夾，因為docker是與本地同步的")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/03/22/g6SW74mV3CUP82p.jpg",alt:"-w857"}})]),a._v(" "),e("p",[a._v("假設domain是"),e("code",[a._v("project1.test")]),a._v(", 增加一個"),e("code",[a._v(".conf")]),a._v("檔案")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/laradock/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -r nginx/sites/laravel.conf.example nginx/sites/project1.test.conf\n")])])]),e("p",[a._v("把修改"),e("code",[a._v("server_name")]),a._v("和"),e("code",[a._v("root")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" nginx/sites/project1.test.conf\n\nserver_name project1.test"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nroot /var/www/project1/public"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("p",[a._v("更新一下nginx的設定")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" nginx nginx -s reload\n")])])]),e("p",[a._v("注意：要在本機的hosts檔添加"),e("code",[a._v("127.0.0.1 project1.test")]),a._v(" "),e("img",{attrs:{src:"https://i.loli.net/2020/03/22/PZwU8Y6DCVIkFMJ.jpg",alt:"-w800"}})]),a._v(" "),e("p",[a._v("現在上"),e("code",[a._v("project1.test:8000")]),a._v("，應該可以看到Laravel的畫面")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/03/22/TSfysRZWMUAvhPu.jpg",alt:"-w1280"}})]),a._v(" "),e("p",[a._v("還有些後續操作, 如果我們要"),e("code",[a._v("migrate")]),a._v(", 會有Connection refused, 因為我們未正確設定"),e("code",[a._v(".env")]),a._v("中的"),e("code",[a._v("DB_HOST")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php artisan migrate\n\n Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2002")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Connection refused "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),e("p",[a._v("將"),e("code",[a._v("DB_HOST")]),a._v("由"),e("code",[a._v("127.0.0.1")]),a._v("改成"),e("code",[a._v("mysql")]),a._v(", 另外填入預設密碼")]),a._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://github.com/laradock/laradock/issues/869#issuecomment-297674870",target:"_blank",rel:"noopener noreferrer"}},[a._v("Connecting Laravel Project with Host Mysql"),e("OutboundLink")],1)])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_HOST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n")])])]),e("p",[a._v("再試一次"),e("code",[a._v("migrate")]),a._v(", 這次成功連接到mysql, 但有錯誤: "),e("code",[a._v("Unknown database 'laravel'")]),a._v(", 原因是一開始在mysql沒有一個database叫"),e("code",[a._v("laravel")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php artisan migrate\n\n  Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1049")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Unknown database "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laravel'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("p",[a._v("現在我們要進入mysql的docker container")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" mysql "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@52107ec0d277:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),e("p",[a._v("登入mysql, 預設帳號密碼都是"),e("code",[a._v("root")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("mysql -u root -p\n\nEnter password:\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nmysql"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("p",[a._v("生成database")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("create database laravel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nQuery OK, "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" row affected "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" sec"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("p",[a._v("現在再試一次"),e("code",[a._v("migrate")]),a._v(", 成功!")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" project1\nphp artisan migrate\n\nMigration table created successfully.\nMigrating: 2014_10_12_000000_create_users_table\nMigrated:  2014_10_12_000000_create_users_table "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.04")]),a._v(" seconds"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nMigrating: 2019_08_19_000000_create_failed_jobs_table\nMigrated:  2019_08_19_000000_create_failed_jobs_table "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" seconds"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("p",[a._v("嘗試一下開始auth, 看看能否正常運作")]),a._v(" "),e("blockquote",[e("p",[a._v("https://stackoverflow.com/a/34546836/5588637")]),a._v(" "),e("p",[a._v("https://laravel.com/docs/6.x/frontend")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" project1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("composer")]),a._v(" require laravel/ui\nphp artisan ui bootstrap --auth\nphp artisan migrate\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run dev\n")])])]),e("p",[a._v("成功!!")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/03/21/klKnM8mDO5aCpJb.png",alt:"image-20200320153041993"}})]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("Xdebug")]),a._v(" "),e("blockquote",[e("p",[a._v("參考: http://onthink.com/2019/02/20/mac-laradock-xdebug-phpstorm/")])]),a._v(" "),e("hr"),a._v(" "),e("h2",{attrs:{id:"laravel-multiple-pproject-laradock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-multiple-pproject-laradock"}},[a._v("#")]),a._v(" Laravel  Multiple Pproject (Laradock)")]),a._v(" "),e("p",[a._v("假設有兩個Laravel Project, "),e("code",[a._v("project1")]),a._v(" 和"),e("code",[a._v("project2")])]),a._v(" "),e("p",[a._v("首先設定要個project的nginx conf")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  project1 ")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -r nginx/sites/laravel.conf.example nginx/sites/project1.test.conf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  project2")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -r nginx/sites/laravel.conf.example nginx/sites/project2.test.conf\n")])])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  project1 ")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" nginx/sites/project1.test.conf\n\nserver_name project1.test"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nroot /var/www/project1/public"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  project2")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" nginx/sites/project2.test.conf\n\nserver_name project2.test"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nroot /var/www/project2/public"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h3",{attrs:{id:"local-本地測試"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#local-本地測試"}},[a._v("#")]),a._v(" local 本地測試")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/hosts")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1       project1.wingch.site\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1       project2.wingch.site\n")])])]),e("p",[a._v("會根據"),e("code",[a._v("server_name")]),a._v(" 轉入指定的path")]),a._v(" "),e("p",[e("img",{attrs:{src:s(512),alt:"image-20200726171623552"}})]),a._v(" "),e("h3",{attrs:{id:"remote-遠端測試"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remote-遠端測試"}},[a._v("#")]),a._v(" remote 遠端測試")]),a._v(" "),e("p",[a._v("在"),e("code",[a._v("cloudflare")]),a._v(" 將兩條domain 指入server")]),a._v(" "),e("p",[e("img",{attrs:{src:s(513),alt:"image-20200726172441438"}})]),a._v(" "),e("p",[a._v("在路由器指向本地的server, server本地ip是"),e("code",[a._v("192.168.1.117")]),a._v(", 本地的80 port 指向server的80 port")]),a._v(" "),e("p",[e("img",{attrs:{src:s(514),alt:"image-20200726172743594"}})]),a._v(" "),e("p",[e("img",{attrs:{src:s(515),alt:"image-20200726172910397"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);