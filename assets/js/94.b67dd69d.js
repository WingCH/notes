(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{714:function(a,s,t){"use strict";t.r(s);var n=t(38),e=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"laravel-docker-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#laravel-docker-setup","aria-hidden":"true"}},[a._v("#")]),a._v(" Laravel Docker Setup")]),a._v(" "),t("p",[a._v("這次學習在Docker建立Laravel的開發環境，方便日後上生產環境(Production)")]),a._v(" "),t("blockquote",[t("p",[a._v("參考: "),t("a",{attrs:{href:"https://blog.wu-boy.com/2019/12/setup-laravel-environment-in-15-minutes/",target:"_blank",rel:"noopener noreferrer"}},[a._v("用 15 分鐘快速打造 Laravel 開發環境"),t("OutboundLink")],1),a._v(" , "),t("a",{attrs:{href:"https://laradock.io/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laradock"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("假設本身沒有Laravel Project，從第一步開始")]),a._v(" "),t("p",[a._v("目標目錄架構")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("├── laradock\n└── www\n")])])]),t("p",[a._v("首先clone一份laradock.git")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/Laradock/laradock.git\n\nCloning into "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laradock'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nremote: Enumerating objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(", done.\nremote: Counting objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Compressing objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Total "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", reused "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", pack-reused "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10329")]),a._v("\nReceiving objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v("/10339"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9.23")]),a._v(" MiB "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.35")]),a._v(" MiB/s, done.\nResolving deltas: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5605")]),a._v("/5605"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\n")])])]),t("p",[a._v("進入laradock folder, 復制env-example 進行自定義")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" laradock\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" env-example .env\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\t\n")])])]),t("p",[a._v("將"),t("code",[a._v("APP_CODE_PATH_HOST")]),a._v("修改為"),t("code",[a._v("../www/")]),a._v("，以符合我們一開始的目錄架構")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("APP_CODE_PATH_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/www/\n")])])]),t("p",[a._v("另外為了避免"),t("code",[a._v("80")]),a._v(" "),t("code",[a._v("443")]),a._v(" port 已被使用，所以更改到"),t("code",[a._v("8000")]),a._v(" "),t("code",[a._v("4430")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTP_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTPS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4430")]),a._v("\n")])])]),t("p",[a._v("進入容器 "),t("code",[a._v("nginx")]),a._v(" 和 "),t("code",[a._v("mysql")]),a._v(", 會自動生成"),t("code",[a._v("network")]),a._v(", "),t("code",[a._v("container")]),a._v("等項目")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose up -d nginx mysql\n\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_frontend"')]),a._v(" with driver "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_backend"')]),a._v(" with driver "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_default"')]),a._v(" with the default driver\nCreating laradock_docker-in-docker_1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_mysql_1            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_workspace_1        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_php-fpm_1          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_nginx_1            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n")])])]),t("p",[a._v("另外，因為我們一開始條改了"),t("code",[a._v(".env")]),a._v(" 中"),t("code",[a._v("APP_CODE_PATH_HOST")]),a._v("的位置，所以生成"),t("code",[a._v("www")]),a._v("的文件夾, 現在跟我們一開始的目錄架構一致")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("\n\nlaradock www\n")])])]),t("p",[a._v("然後進入剛剛生成的"),t("code",[a._v("laradock_workspace_1")]),a._v(", 日後的所有"),t("code",[a._v("php")]),a._v("的操作都是在這裡進行")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@93e56517c403:/var/www"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),t("p",[a._v("在當前目錄生成Laravel項目")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("composer create-project laravel/laravel --prefer-dist "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n\nInstalling laravel/laravel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing laravel/laravel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nCreated project "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" @php -r "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"file_exists('.env') || copy('.env.example', '.env');\"")]),a._v("\nLoading composer repositories with package information\nUpdating dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("including require-dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nPackage operations: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("93")]),a._v(" installs, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" updates, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" removals\n  - Installing voku/portable-ascii "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.4")]),a._v(".10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing symfony/polyfill-ctype "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v1.14.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing phpoption/phpoption "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.7")]),a._v(".2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing vlucas/phpdotenv "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v4.1.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("現在上"),t("code",[a._v("http://localhost:8000/")]),a._v("，應該可以看到Laravel的畫面")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/03/21/guK2x9As38FhHa7.png",alt:"image-20200320110937960"}})]),a._v(" "),t("p",[a._v("還有些後續操作, 如果我們要"),t("code",[a._v("migrate")]),a._v(", 會有Connection refused, 因為我們未正確設定"),t("code",[a._v(".env")]),a._v("中的"),t("code",[a._v("DB_HOST")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("php artisan migrate\n\n Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Connection refused "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("將"),t("code",[a._v("DB_HOST")]),a._v("由"),t("code",[a._v("127.0.0.1")]),a._v("改成"),t("code",[a._v("mysql")]),a._v(", 另外填入預設密碼")]),a._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://github.com/laradock/laradock/issues/869#issuecomment-297674870",target:"_blank",rel:"noopener noreferrer"}},[a._v("Connecting Laravel Project with Host Mysql"),t("OutboundLink")],1)])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n")])])]),t("p",[a._v("再試一次"),t("code",[a._v("migrate")]),a._v(", 這次成功連接到mysql, 但有錯誤: "),t("code",[a._v("Unknown database 'laravel'")]),a._v(", 原因是一開始在mysql沒有一個database叫"),t("code",[a._v("laravel")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("php artisan migrate\n\n  Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1049")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Unknown database "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laravel'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("現在我們要進入mysql的docker container")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" mysql "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@52107ec0d277:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),t("p",[a._v("登入mysql, 預設帳號密碼都是"),t("code",[a._v("root")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mysql -u root -p root\n\nEnter password:\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("生成database")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("create database laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" row affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("現在再試一次"),t("code",[a._v("migrate")]),a._v(", 成功!")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\nphp artisan migrate\n\nMigration table created successfully.\nMigrating: 2014_10_12_000000_create_users_table\nMigrated:  2014_10_12_000000_create_users_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.04")]),a._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nMigrating: 2019_08_19_000000_create_failed_jobs_table\nMigrated:  2019_08_19_000000_create_failed_jobs_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("嘗試一下開始auth, 看看能否正常運作")]),a._v(" "),t("blockquote",[t("p",[a._v("https://stackoverflow.com/a/34546836/5588637")]),a._v(" "),t("p",[a._v("https://laravel.com/docs/6.x/frontend")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("composer require laravel/ui\nphp artisan ui vue --auth\nphp artisan migrate\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run dev\n")])])]),t("p",[a._v("重新啟動")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker-compose down\nocker-compose up -d nginx mysql\n")])])]),t("p",[a._v("成功!!")]),a._v(" "),t("h1",{attrs:{id:"laravel-docker-setup-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#laravel-docker-setup-2","aria-hidden":"true"}},[a._v("#")]),a._v(" Laravel Docker Setup")]),a._v(" "),t("p",[a._v("這次學習在Docker建立Laravel的開發環境，方便日後上生產環境(Production)")]),a._v(" "),t("blockquote",[t("p",[a._v("參考: "),t("a",{attrs:{href:"https://blog.wu-boy.com/2019/12/setup-laravel-environment-in-15-minutes/",target:"_blank",rel:"noopener noreferrer"}},[a._v("用 15 分鐘快速打造 Laravel 開發環境"),t("OutboundLink")],1),a._v(" , "),t("a",{attrs:{href:"https://laradock.io/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Laradock"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("假設本身沒有Laravel Project，從第一步開始")]),a._v(" "),t("p",[a._v("目標目錄架構")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("├── laradock\n└── www\n")])])]),t("p",[a._v("首先clone一份laradock.git")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/Laradock/laradock.git\n\nCloning into "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laradock'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nremote: Enumerating objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(", done.\nremote: Counting objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Compressing objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\nremote: Total "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", reused "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("delta "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", pack-reused "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10329")]),a._v("\nReceiving objects: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10339")]),a._v("/10339"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9.23")]),a._v(" MiB "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.35")]),a._v(" MiB/s, done.\nResolving deltas: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("% "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5605")]),a._v("/5605"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", done.\n")])])]),t("p",[a._v("進入laradock folder, 復制env-example 進行自定義")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" laradock\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" env-example .env\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\t\n")])])]),t("p",[a._v("將"),t("code",[a._v("APP_CODE_PATH_HOST")]),a._v("修改為"),t("code",[a._v("../www/")]),a._v("，以符合我們一開始的目錄架構")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("APP_CODE_PATH_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/www/\n")])])]),t("p",[a._v("另外為了避免"),t("code",[a._v("80")]),a._v(" "),t("code",[a._v("443")]),a._v(" port 已被使用，所以更改到"),t("code",[a._v("8000")]),a._v(" "),t("code",[a._v("4430")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTP_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NGINX_HOST_HTTPS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4430")]),a._v("\n")])])]),t("p",[a._v("進入容器 "),t("code",[a._v("nginx")]),a._v(" 和 "),t("code",[a._v("mysql")]),a._v(", 會自動生成"),t("code",[a._v("network")]),a._v(", "),t("code",[a._v("container")]),a._v("等項目")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose up -d nginx mysql\n\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_frontend"')]),a._v(" with driver "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_backend"')]),a._v(" with driver "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bridge"')]),a._v("\nCreating network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"laradock_default"')]),a._v(" with the default driver\nCreating laradock_docker-in-docker_1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_mysql_1            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_workspace_1        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_php-fpm_1          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\nCreating laradock_nginx_1            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n")])])]),t("p",[a._v("另外，因為我們一開始條改了"),t("code",[a._v(".env")]),a._v(" 中"),t("code",[a._v("APP_CODE_PATH_HOST")]),a._v("的位置，所以生成"),t("code",[a._v("www")]),a._v("的文件夾, 現在跟我們一開始的目錄架構一致")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("\n\nlaradock www\n")])])]),t("p",[a._v("然後進入剛剛生成的"),t("code",[a._v("laradock_workspace_1")]),a._v(", 日後的所有"),t("code",[a._v("php")]),a._v("的操作都是在這裡進行")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@93e56517c403:/var/www"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),t("p",[a._v("在當前目錄生成Laravel項目")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("composer create-project laravel/laravel --prefer-dist "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n\nInstalling laravel/laravel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing laravel/laravel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v7.0.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nCreated project "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" @php -r "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"file_exists('.env') || copy('.env.example', '.env');\"")]),a._v("\nLoading composer repositories with package information\nUpdating dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("including require-dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nPackage operations: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("93")]),a._v(" installs, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" updates, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" removals\n  - Installing voku/portable-ascii "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.4")]),a._v(".10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing symfony/polyfill-ctype "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v1.14.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing phpoption/phpoption "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.7")]),a._v(".2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  - Installing vlucas/phpdotenv "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("v4.1.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("%"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("現在上"),t("code",[a._v("http://localhost:8000/")]),a._v("，應該可以看到Laravel的畫面")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/03/21/guK2x9As38FhHa7.png",alt:"image-20200320110937960"}})]),a._v(" "),t("p",[a._v("還有些後續操作, 如果我們要"),t("code",[a._v("migrate")]),a._v(", 會有Connection refused, 因為我們未正確設定"),t("code",[a._v(".env")]),a._v("中的"),t("code",[a._v("DB_HOST")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("php artisan migrate\n\n Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2002")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Connection refused "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("p",[a._v("將"),t("code",[a._v("DB_HOST")]),a._v("由"),t("code",[a._v("127.0.0.1")]),a._v("改成"),t("code",[a._v("mysql")]),a._v(", 另外填入預設密碼")]),a._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://github.com/laradock/laradock/issues/869#issuecomment-297674870",target:"_blank",rel:"noopener noreferrer"}},[a._v("Connecting Laravel Project with Host Mysql"),t("OutboundLink")],1)])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" .env\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DB_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\n")])])]),t("p",[a._v("再試一次"),t("code",[a._v("migrate")]),a._v(", 這次成功連接到mysql, 但有錯誤: "),t("code",[a._v("Unknown database 'laravel'")]),a._v(", 原因是一開始在mysql沒有一個database叫"),t("code",[a._v("laravel")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("php artisan migrate\n\n  Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("QueryException\n\n  SQLSTATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HY000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1049")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Unknown database "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'laravel'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SQL: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" * from information_schema.tables where table_schema "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" laravel and table_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" migrations and table_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BASE TABLE'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("現在我們要進入mysql的docker container")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" mysql "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\nroot@52107ec0d277:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n")])])]),t("p",[a._v("登入mysql, 預設帳號密碼都是"),t("code",[a._v("root")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mysql -u root -p root\n\nEnter password:\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("生成database")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("create database laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nQuery OK, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" row affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("現在再試一次"),t("code",[a._v("migrate")]),a._v(", 成功!")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" workspace "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\nphp artisan migrate\n\nMigration table created successfully.\nMigrating: 2014_10_12_000000_create_users_table\nMigrated:  2014_10_12_000000_create_users_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.04")]),a._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nMigrating: 2019_08_19_000000_create_failed_jobs_table\nMigrated:  2019_08_19_000000_create_failed_jobs_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.01")]),a._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("嘗試一下開始auth, 看看能否正常運作")]),a._v(" "),t("blockquote",[t("p",[a._v("https://stackoverflow.com/a/34546836/5588637")]),a._v(" "),t("p",[a._v("https://laravel.com/docs/6.x/frontend")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("composer require laravel/ui\nphp artisan ui vue --auth\nphp artisan migrate\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run dev\n")])])]),t("p",[a._v("重新啟動")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker-compose down\nocker-compose up -d nginx mysql\n")])])]),t("p",[a._v("成功!!")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/03/21/klKnM8mDO5aCpJb.png",alt:"image-20200320153041993"}})])])},[],!1,null,null,null);s.default=e.exports}}]);